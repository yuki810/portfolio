# 2048ゲーム

以下、プログラムの説明

## ゲームの概要
1. 数字を足し合わせて「2048」を作るゲームです。
2. 移動キー(矢印)を押すと、数字の移動とともにランダムに数字が発生します。
3. 数字の移動で同じ数字がぶつかると、数字が足し合わされます。
4.  数字を足し合わせて「2048」を作ることができるとゲームクリアで、操作回数(スコア)が小さいほど優れた結果であることを示します。
5. 数字の移動ができなくなるとゲームオーバーです。

## 各関数の説明

### move - 矢印入力をセルに反映する関数
1. 矢印入力1つ分につき3つのintが得られる&3つ目のintが方向によって異なるようだったので、3つ目の数字で矢印の入力方向を判定する仕様にしました。

2. 数字合体部分の仕様は全ての方向が同じ考え方に基づいているので、上矢印の場合のみ説明します。
- 矢印方向に対する移動距離のパラメータとして、upnumを導入します。
- upnumは上方向の移動に関係するので列ごとにセルを見ていきます。
  セルが0の時、下のマスはこのマスに移動可能なのでupnumを1増やします。
  セルが1の時、upnumの分だけセルの数字を上方向に移動させます。
  この繰り返しでセルの数字が上詰めになりました。
- 数字を合体させます。
  合体の組み合わせとして、「0・1 & 2・3行目」「0・1行目のみ」「2・3行目のみ」「1・2行目のみ」があるので、それぞれの場合でセルの数字の変化/移動を実装しました。
- 次の行に移る前にupnumは初期値0に戻します。

### printcell - ゲーム画面の表示
1. countで操作回数を表示します。(操作回数とゲームの上手さが関係すると思ったからです)

2. セルの部分では2以上をANSIエスケープコードを用いた色付き数字で、0を"-"で表示します。色付き数字は数字によっているが変わるようにカラーコードを指定する数字をセルの数字を含む関数にしました。

### numgenerate - ランダムに数字を発生させる
1. セルの中で値がない部分(0)を記録します。
2. 値がない部分(0)に対し、ランダムで2,4を発生させます。(4の発生確率は10%程度)

### conditioncheck - ゲーム継続確認
1. セルの中に2048があった時、1を返して終了
2. セルの中に0があった時、0を返して終了
3. セルの中に0がなかった時、隣り合っている数字で同じものがあれば0を返して終了。隣り合っている数字で同じものが1つもなければ2を返す。

### main - 2048ゲーム
1. 初期設定：
標準出力の文字指定/盤面の大きさ指定/セルの初期化/画面更新用の配列emptyの作成/操作回数表示用int countの初期化を行う。
2. 初期状態：
数字をランダムに2回生成して初期状態とする。
3. 2048ゲーム：
enterを押さなくてもキー入力を受け付けるようになる雛形コードを使用。ゲームクリア、ゲームオーバーで繰り返し部分を抜け出せるようにbreaknumを準備。

- コンマが入力される/ゲーム終了まで

  move → numgenerate → 画面更新(カーソルを上に戻しカーソル以降消去/ゲーム中断後カーソル位置が上部のゲーム画面内で留まらないようここで更新するようにした) → printcell → conditioncheckの繰り返し

- ゲームクリア/ゲームオーバー
  breaknum = 1の時、2048があるということでゲームクリア/breaknum = 2の時、完全にタイルが動かせない状態なのでゲームオーバー：それぞれの文章を表示して終了